{% extends 'base.html' %}
{% load static %}
{% block title %}Vehicle Recommendation{% endblock %}
{% block content %}
    <div class="container">
        <h3>Vehicle Recommendation</h3>
        <form>
            <div class="row">
                <div class="input-field col s12">
                    <select id="location-select">
                        <option value="" disabled selected>Choose your Store</option>
                        {% for item in list_of_locations %}
                            <option value="{{ item }}">{{ item }}</option>
                        {% endfor %}
                    </select>
                    <label>Location</label>
                </div>
            </div>
            <div class="row">
                <iframe class="col s12" id="map" height="400" frameborder="0" style="border:0"
                        src="https://www.google.com/maps/embed/v1/search?q=brisbane&key=AIzaSyAIgrTrt5LaMsC-JUUK-jZXYkZyeLEc3JU"
                        allowfullscreen></iframe>
            </div>
            <div class="row">
                <label>Date of Rental</label>
                <input type="text" class="datepicker">
            </div>
            <div class="row">
                <label>Seat Number Range</label>
                <div id="seat-slider"></div>
            </div>
            <span value="{{ lowest_seats }}" id="lowest-seats" display="none"></span>
            <span value="{{ highest_seats }}" id="highest-seats" display="none"></span>
            <div class="row">
                <label>Transmission Type</label>
                <p>
                    <label>
                        <input type="checkbox"/>
                        <span>Manual</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" checked="checked"/>
                        <span>Automatic</span>
                    </label>
                </p>
            </div>
            <div class="row">
                <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </form>
    </div>
{% endblock %}

{% block extrascripts %}
    <script>
        $(document).ready(function () {
            $('select').formSelect();
        });


        var slider = document.getElementById('seat-slider');
        noUiSlider.create(slider, {
            start: [2, 5],
            connect: true,
            step: 1,
            orientation: 'horizontal', range: {
                'min': parseInt($('#lowest-seats').attr('value')),
                'max': parseInt($('#highest-seats').attr('value'))
            },
            format: wNumb({
                decimals: 0
            })
        });

        $("#location-select").change(function () {
            $("#map").attr('src', "https://www.google.com/maps/embed/v1/search?q=" + encodeURI($("#location-select").val() + ", australia") + "&key=AIzaSyAIgrTrt5LaMsC-JUUK-jZXYkZyeLEc3JU")
        })

      $(document).ready(function(){
    $('.datepicker').datepicker();
  });
          
    </script>
{% endblock %}