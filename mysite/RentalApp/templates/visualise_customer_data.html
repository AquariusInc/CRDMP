{% extends 'base.html' %}
{% load static %}

{% block title %}Customer Visualisation{% endblock %}

{% block extracss %}<link rel="stylesheet" href="{% static 'css/visualise.css' %}">{% endblock %}

{% block extrascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<script src="{% static 'js/visualise.js' %}"></script>
{% endblock %}

{% block content %}

<div class="container">
<h3 class="card-panel" align="center">Customer Visualisation</h3>
	<div class="tab">
	  <button id="loadbtn" class="tablinks" onclick="openTab(event, 'Amount', 'amountChart', obj.createDate)">Number of Customers</button>
	  <button class="tablinks" onclick="openTab(event, 'Occupation', 'occupationChart', obj.occupation)">Occupation</button>
	  <button class="tablinks" onclick="openTab(event, 'Gender', 'genderChart', obj.gender)">Gender</button>
	  <button class="tablinks" onclick="openTab(event, 'Repeat Customers', 'repeatChart', obj.customer)">Repeat Customers</button>
	  <button class="tablinks" onclick="openTab(event, 'dob', 'dobChart', obj.dob)">Age</button>
	</div>
	
    <div id="Amount" class="tabcontent">
      <h4 align="center">Total Customers Over Time</h4>
	  <canvas id="amountChart" width="900" height="400"></canvas>
       <div class="buttonContainer">
	    <button class="buttonGraph" onclick="changeGraph(event, 'amountChart', 'bar', obj.createDate)">BAR</button>
	   	<button class="buttonGraph" onclick="changeGraph(event, 'amountChart', 'pie', obj.createDate)">PIE</button>
	   </div>
	</div>
	
		<div id="dob" class="tabcontent">
      <h4 align="center">Customer Age Brackets</h4>
	  <canvas id="dobChart" width="900" height="400"></canvas>
	  <div class="buttonContainer">
	    <button class="buttonGraph" onclick="changeGraph(event, 'dobChart', 'bar', obj.dob)">BAR</button>
	    <button class="buttonGraph" onclick="changeGraph(event, 'dobChart', 'pie', obj.dob)">PIE</button>		
	  </div>
	</div>
	
	
	<div id="Occupation" class="tabcontent">
      <h4 align="center">Customer Occupation</h4>
	  <canvas id="occupationChart" width="900" height="400"></canvas>
	  <div class="buttonContainer">
	    <button class="buttonGraph" onclick="changeGraph(event, 'occupationChart', 'bar', obj.occupation)">BAR</button>
	    <button class="buttonGraph" onclick="changeGraph(event, 'occupationChart', 'pie', obj.occupation)">PIE</button>		
	  </div>
	</div>

	<div id="Gender" class="tabcontent">
      <h4 align="center">Customer Gender</h4>
	  <canvas id="genderChart" width="900" height="400"></canvas>
	  <div class="buttonContainer">
	    <button class="buttonGraph" onclick="changeGraph(event, 'genderChart', 'bar', obj.gender)">BAR</button>
	    <button class="buttonGraph" onclick="changeGraph(event, 'genderChart', 'pie', obj.gender)">PIE</button>	
			
	  </div>
	</div>

	<div id="Repeat Customers" class="tabcontent">
      <h4 align="center">Repeat Customers</h4>
	  <canvas id="repeatChart" width="900" height="400"></canvas>
	</div>
	
	<script>
	var obj = {{ js_data|safe }};
	</script>
	
</div>
{% endblock %}